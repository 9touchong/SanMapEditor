三国游戏的配套工具项目
编辑地图
产生游戏所需的地图相关文件。
游戏初始化所需要的文件，这里产出的也要再编辑加工才用于san游戏的逻辑层与物理层的初始化工作。
其实仔细琢磨一些十一等这种类六边形单位倒错地图就会发现，之前考虑的有点复杂了。仍然是可以用一个单纯二位数组表示逻辑地图的，或者说是坐标图。只是根据横向的坐标奇偶其相邻单位的坐标判断规则不同。比如一个(x,y),x是单数，除与正南正北的(x,y-1)(x,y+1)相邻，西邻(x-1,y)(x-1,y+1),东邻(x+1,y)(x+1,y+1);相反一个(x,y)是双数，除与正南正北的(x,y-1)(x,y+1)相邻，西邻(x-1,y-1)(x-1,y),东邻(x+1,y-1)(x+1,y);当然这个只是大哥比方，根据实际map排列方式可能是相反的。    规范化一下，全图的第一个点位，(0,0)点就在左上角或说西北角，这样排列，那样这个0点位的六边形实际只有四分之一进入了图内。这样的排列规范，相邻法则就与上面一致了。再强调一下，0起不是1起。
经过一个简单的测试发现用位图表示六边形网格比用矢量线条绘制六边形速度快的不是一点半点。可能是因为绘制矢量六边形要一条线一个点的画，计算量实在比直接位图大的多吧。
用位图方案替换了矢量线条方案。
其实这个项目完全适合之前用过的事件驱动的模式，不同层之间，同层不同级之间，交流都以事件收发进行，这是很合理的模式。但这次我想尝试一些完全脱离事件可以做到怎样。
到写入文件这儿卡住了，靠egret本身的任和东西都没有涉及写入本地文件的。据说调用自编的库可以达到，但不会。或者可以以与服务器交流的方式见一个可以本地存取的node服务器，这是绝对可行的又不甘心。现在打算先看看改用python写可不可行，不行再回来纠结。
不行 wxpython算是比较成熟的UI模块了 可仍然不适合次项目，因为本项目的关键是在一可滚动窗口内编辑或绘制，wx这里处理实在复杂，可以但难，也是资料不多。
所以还回到这里，当然也还要先继续尝试不通过服务器的方式，理论上h5是有与本地文件的操作接口的，要研究这是否可行。实际上甚至浏览器读取本地文件都不必须，只要写入文本功能能实现就妥了。
经过试验h5中读写文件都是可以实现的，写入文件要用一个FileSaver.js，就两行代码，不过是通过类似于自动下载的方式保存文件，不能覆盖，不能灵活选择文件夹，但已经行了，浏览器这样是可以接受的；
接下来要研究一下怎样在egret项目中应用。
写入就用上面的方式实现的，读入直接用egret的RES就行了。
即使是原始的数据，光有一个地形map似乎也不太够，或者说很不方便，比如建筑地基集合可以分出来列个表，这样方便以后剧本工作编辑城市等，否则编辑剧本的时候仍然要这个工作，如果多个剧本还要重复做多次。
但具体在地形之上的跟随map要怎样定义还是要考虑考虑再确定，暂时没找到很好的方法。
地形map之上是建筑map，不论永久建筑还是可拆除建筑还是建筑地基都在里面。
以目前的想法，产出的东西也不太多不太大，就地形序列，建筑点位信息/索引，就这两样，其他的没必要在这里生成，在游戏项目里直接编辑就好。
建筑就分两类，永久建筑和临时建筑。城池关卡都是永久建筑。非永久建筑在地图模块中就是一个地基的存在。当在剧本层面上时才可能会开局初始化就出现城塞等非永久建筑。
无论城池关卡都不一定只占一个点位，实际上大多数情况下都是要占两个以上的六边形的，按san11的设定城池关卡的占位是规律的，如果抛开不可进入地形不算的话，关卡只占一个格子，因为都是在山口，城池占1+6=7个。准备沿用san11的这个设定。
目前遇到一个问题，想把所有格子进行显示隐藏的切换，以此一个一个操作设置alpha在理论上是可行的，但实际上却极其的卡，根本行不通，因为格子总数是数万的。
把格子都放在一个容器中，对容器进行显隐就可以了。
应该重新考虑一下游戏需要的地形等初始文件的架构，而不是这里怎么方便怎么来。
或许不应该把城池城塞等算作地形文件里的内容，甚至主径都不应该在里面。
没必要考虑放到一个文件里还是多个文件里，怎么方便怎么来，只要能明了的区分开就行。
之前的永久建筑非永久建筑的设定的想法现在觉得不行。建筑要包括城市城镇城塞关口港口甚至地基等，即便同一种类型的建筑属性也可能千差万别，非分两大类有点作茧自缚了。现在这种设定是好好想过的，建筑属性要复杂一点，而自然地形就尽量简化，几个固定类型即可。因为完整图最低也是200*200的几万个格子每个都有复杂的属性而大多数甚至都不会被用到，没有必要；建筑呢所有类型加起来最多也就几百个。
地图和剧本的概念区分不是凭空想象能搞的掂的，要在进行过程中改进完善，现在可以暂时定一种概念关系，开发过程中再改进。地图 就是自然地形图，建筑人物等都属于剧本，实际上地图也属于剧本，只不过允许不同剧本用同一的地图或其他东西。这种现在还是不应该过多考虑的，毕竟一个完整案例都没整出来，多剧本多地图还是想太多了吧 呵呵。
以目前的地图和网格规格看 每个格子跨度在六公里左右。san11大概12左右。我觉得单论历史性san11的格子有点大了。因为三国时代单一部队不会人数太多，几千才是常态，数万当然也有，游戏考虑1万为典型吧，1万人列阵占地应该不足五公里，12很夸张了。
冷兵器时代，正常步兵为主的成熟军队一天行军20公里左右是比较正常的。当然三国这种乱世，很多情况下部队是半民兵性质的专业性不高，一回合的行军距离应该少一点。
琢磨之后决定这里的方案是，点击保存后 保存两个文件(或在一个文件中分两部分)，和之前的考虑差不多，一是自然地形二维表的储存文件，和之前的一样，一是建筑附加信息，和之前的架构也差不多。但是制作过程不一样，在自然地形成不再有建筑符号信息，这里与之前不同，所以UI百年祭界面也要区分出自然地形和建筑至少两套。UI编辑界面应该加入查看功能，点击某格子不是改变其而是显示信息，在地形和建筑两块都用的到。 读入文件时，会读入建筑信息文件，这样改是一个或多个带有json内容的文件，通过这个读入建筑信息但在UI界面不能修改，太复杂没必要，直接手动修改文件就行。而这些可读建筑文件是根据生成的建筑附加信息文件自行编辑的。
主径到底应该放在哪呢，单独，和城镇一起，在地形里？目前还是放在地形一起合适。目前。目前。
其实能成功加入查看功能的话，那就没必要生成建筑参考文件了，直接手动编辑UI查看就行了。